<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ | –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è –±–∏–æ—Ö–∏–º–∏–∏ –≤–∏–Ω–∞</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <header class="card">
      <h1>üë§ –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h1>
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä!</h2>
        <button id="logoutBtn" class="btn" style="background-color: #e74c3c;">–í—ã–π—Ç–∏</button>
      </div>
    </header>

    <main>
      <section class="card">
        <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–∑—Ü–∞–º–∏ –≤–∏–Ω–∞</h2>
        <div style="margin-bottom: 20px;">
          <button id="addSampleBtn" class="btn" style="margin-right: 10px;">
            <span class="add-icon">‚ûï</span> –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–∑–µ—Ü
          </button>
          <a href="catalog.html" class="btn" style="background-color: #3498db;">–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –∫–∞—Ç–∞–ª–æ–≥—É</a>
        </div>
      </section>

      <section class="card">
        <h2>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
          <div class="stat-card">
            <h3 id="totalSamples">0</h3>
            <p>–í—Å–µ–≥–æ –æ–±—Ä–∞–∑—Ü–æ–≤</p>
          </div>
          <div class="stat-card">
            <h3 id="whiteWines">0</h3>
            <p>–ë–µ–ª—ã–µ –≤–∏–Ω–∞</p>
          </div>
          <div class="stat-card">
            <h3 id="redWines">0</h3>
            <p>–ö—Ä–∞—Å–Ω—ã–µ –≤–∏–Ω–∞</p>
          </div>
          <div class="stat-card">
            <h3 id="regionsCount">0</h3>
            <p>–†–µ–≥–∏–æ–Ω–æ–≤</p>
          </div>
        </div>
      </section>
    </main>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –æ–±—Ä–∞–∑—Ü–∞ -->
    <div id="addSampleModal" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2>‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –æ–±—Ä–∞–∑–µ—Ü</h2>
        <form id="addSampleForm">
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px">
            <!-- –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã: —Ä–µ–≥–∏–æ–Ω, —Ç–µ—Ä—Ä—É–∞—Ä, —Ö–æ–∑—è–π—Å—Ç–≤–æ, –≤–∏–Ω–æ–¥–µ–ª—å–Ω—è -->
            <div>
              <label for="region">–†–µ–≥–∏–æ–Ω: <span class="required">*</span></label>
              <input
                type="text"
                id="region"
                name="region"
                class="filter-input"
                required
              />
            </div>
            <div>
              <label for="terroir">–¢–µ—Ä—Ä—É–∞—Ä:</label>
              <input
                type="text"
                id="terroir"
                name="terroir"
                class="filter-input"
              />
            </div>
            <div>
              <label for="producer">–•–æ–∑—è–π—Å—Ç–≤–æ:</label>
              <input
                type="text"
                id="producer"
                name="producer"
                class="filter-input"
              />
            </div>
            <div>
              <label for="winery">–í–∏–Ω–æ–¥–µ–ª—å–Ω—è:</label>
              <input
                type="text"
                id="winery"
                name="winery"
                class="filter-input"
              />
            </div>
            <!-- –ö–æ–ª–æ–Ω–∫–∏: –Ω–∞–∑–≤–∞–Ω–∏–µ, —Å–æ—Ä—Ç, –≥–æ–¥, —Ü–≤–µ—Ç, –∫–∞—Ç–µ–≥–æ—Ä–∏—è, –º–µ—Å—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏—è -->
            <div>
              <label for="name">–ù–∞–∑–≤–∞–Ω–∏–µ: <span class="required">*</span></label>
              <input
                type="text"
                id="name"
                name="name"
                class="filter-input"
                required
              />
            </div>
            <div>
              <label for="sort">–°–æ—Ä—Ç: <span class="required">*</span></label>
              <input
                type="text"
                id="sort"
                name="sort"
                class="filter-input"
                required
              />
            </div>
            <div>
              <label for="harvestYear">–ì–æ–¥: <span class="required">*</span></label>
              <input
                type="number"
                id="harvestYear"
                name="harvestYear"
                class="filter-input"
                min="1900"
                max="2030"
                required
              />
            </div>
            <div>
              <label for="color">–¶–≤–µ—Ç: <span class="required">*</span></label>
              <select id="color" name="color" class="filter-input" required>
                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ü–≤–µ—Ç</option>
                <option value="–±–µ–ª–æ–µ">–ë–µ–ª–æ–µ</option>
                <option value="–∫—Ä–∞—Å–Ω–æ–µ">–ö—Ä–∞—Å–Ω–æ–µ</option>
                <option value="—Ä–æ–∑–æ–≤–æ–µ">–†–æ–∑–æ–≤–æ–µ</option>
              </select>
            </div>
            <div>
              <label for="category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è: <span class="required">*</span></label>
              <select id="category" name="category" class="filter-input" required>
                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>
                <option value="—Å—É—Ö–æ–µ">–°—É—Ö–æ–µ</option>
                <option value="—Å–ª–∞–¥–∫–æ–µ">–°–ª–∞–¥–∫–æ–µ</option>
                <option value="–ø–æ–ª—É—Å–ª–∞–¥–∫–æ–µ">–ü–æ–ª—É—Å–ª–∞–¥–∫–æ–µ</option>
                <option value="–ø–æ–ª—É—Å—É—Ö–æ–µ">–ü–æ–ª—É—Å—É—Ö–æ–µ</option>
              </select>
            </div>
            <div>
              <label for="zone">–ú–µ—Å—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏—è: <span class="required">*</span></label>
              <input
                type="text"
                id="zone"
                name="zone"
                class="filter-input"
                required
              />
            </div>
          </div>
          <div style="margin-top: 25px">
            <h3>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ:</h3>
            <div
              style="
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 15px;
                margin-top: 10px;
              "
            >
              <div>
                <label for="ethanol">–û–±—ä–µ–º–Ω–∞—è –¥–æ–ª—è —ç—Ç–∏–ª–æ–≤–æ–≥–æ —Å–ø–∏—Ä—Ç–∞ (% –æ–±.):</label>
                <input
                  type="number"
                  id="ethanol"
                  name="ethanol"
                  class="filter-input"
                  step="0.01"
                  min="0"
                />
              </div>
              <div>
                <label for="sugar">–ú–∞—Å—Å–æ–≤–∞—è –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è —Å–∞—Ö–∞—Ä–æ–≤ (–≥/–¥–º¬≥):</label>
                <input
                  type="number"
                  id="sugar"
                  name="sugar"
                  class="filter-input"
                  min="0"
                  max="300"
                />
              </div>
              <div>
                <label for="acidity">–¢–∏—Ç—Ä—É–µ–º—ã–µ –∫–∏—Å–ª–æ—Ç—ã (–≥/–¥–º¬≥):</label>
                <input
                  type="number"
                  id="acidity"
                  name="acidity"
                  class="filter-input"
                  step="0.01"
                  min="0"
                />
              </div>
              <div>
                <label for="reducedExtract">–ü—Ä–∏–≤–µ–¥–µ–Ω–Ω—ã–π —ç–∫—Å—Ç—Ä–∞–∫—Ç (–≥/–¥–º¬≥):</label>
                <input
                  type="number"
                  id="reducedExtract"
                  name="reducedExtract"
                  class="filter-input"
                  step="0.01"
                  min="0"
                />
              </div>
              <div>
                <label for="sulfurDioxide">–î–∏–æ–∫—Å–∏–¥ —Å–µ—Ä—ã (SO‚ÇÇ) (–º–≥/–¥–º¬≥):</label>
                <input
                  type="number"
                  id="sulfurDioxide"
                  name="sulfurDioxide"
                  class="filter-input"
                  min="0"
                />
              </div>
              <div>
                <label for="volatileAcids">–õ–µ—Ç—É—á–∏–µ –∫–∏—Å–ª–æ—Ç—ã (–≥/–¥–º¬≥):</label>
                <input
                  type="number"
                  id="volatileAcids"
                  name="volatileAcids"
                  class="filter-input"
                  step="0.01"
                  min="0"
                />
              </div>
              <div>
                <label for="organicAcids">–ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è –æ—Ä–≥–∞–Ω–∏—á–µ—Å–∫–∏—Ö –∫–∏—Å–ª–æ—Ç (–≥/–¥–º¬≥):</label>
                <input
                  type="number"
                  id="organicAcids"
                  name="organicAcids"
                  class="filter-input"
                  step="0.01"
                  min="0"
                />
              </div>
              <div>
                <label for="phenolicCompounds">–§–µ–Ω–æ–ª—å–Ω—ã–µ –≤–µ—â–µ—Å—Ç–≤–∞ (–º–≥/–¥–º¬≥):</label>
                <input
                  type="number"
                  id="phenolicCompounds"
                  name="phenolicCompounds"
                  class="filter-input"
                  min="0"
                />
              </div>
              <div>
                <label for="metalCations">–ö–∞—Ç–∏–æ–Ω—ã –º–µ—Ç–∞–ª–ª–æ–≤ (–º–≥/–¥–º¬≥):</label>
                <input
                  type="number"
                  id="metalCations"
                  name="metalCations"
                  class="filter-input"
                  min="0"
                />
              </div>
              <div>
                <label for="inorganicAnions">–ê–Ω–∏–æ–Ω—ã –Ω–µ–æ—Ä–≥–∞–Ω–∏—á–µ—Å–∫–∏—Ö –∫–∏—Å–ª–æ—Ç (–º–≥/–¥–º¬≥):</label>
                <input
                  type="number"
                  id="inorganicAnions"
                  name="inorganicAnions"
                  class="filter-input"
                  min="0"
                />
              </div>
              <div>
                <label for="ph">pH:</label>
                <input
                  type="number"
                  id="ph"
                  name="ph"
                  class="filter-input"
                  step="0.01"
                  min="2.5"
                  max="4.5"
                />
              </div>
              <div>
                <label for="bufferCapacity">–ë—É—Ñ–µ—Ä–Ω–∞—è –µ–º–∫–æ—Å—Ç—å (–º–º–æ–ª—å/–¥–º¬≥):</label>
                <input
                  type="number"
                  id="bufferCapacity"
                  name="bufferCapacity"
                  class="filter-input"
                  step="0.01"
                  min="0"
                />
              </div>
              <div>
                <label for="electricConductivity">–≠–ª–µ–∫—Ç—Ä–æ–ø—Ä–æ–≤–æ–¥–Ω–æ—Å—Ç—å (–º–°–º/—Å–º):</label>
                <input
                  type="number"
                  id="electricConductivity"
                  name="electricConductivity"
                  class="filter-input"
                  step="0.01"
                  min="0"
                />
              </div>
            </div>
          </div>
          <button type="submit" class="btn" style="margin-top: 25px">
            –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–∑–µ—Ü
          </button>
        </form>
      </div>
    </div>

    <footer class="card" style="text-align: center; margin-top: 20px">
      <p>¬© 2025 –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è –±–∏–æ—Ö–∏–º–∏–∏ –≤–∏–Ω–∞ –í–ù–ù–ò–ò–í–∏–í ¬´–ú–∞–≥–∞—Ä–∞—á¬ª</p>
      <p>298600, –†–µ—Å–ø—É–±–ª–∏–∫–∞ –ö—Ä—ã–º, –≥. –Ø–ª—Ç–∞, —É–ª. –ö–∏—Ä–æ–≤–∞, 31</p>
    </footer>
  </div>

  <script>
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
    if (!localStorage.getItem('isAdminLoggedIn')) {
      window.location.href = 'admin_login.html';
    }

    // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ - —Å–Ω–∞—á–∞–ª–∞ –∏–∑ localStorage, –µ—Å–ª–∏ –µ—Å—Ç—å, –∏–Ω–∞—á–µ –∏–∑ js/data.js
    let wineSamples = [];
    const storedWineSamples = localStorage.getItem('wineSamples');
    if (storedWineSamples) {
      wineSamples = JSON.parse(storedWineSamples);
    } else {
      // –ï—Å–ª–∏ –≤ localStorage –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö, –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
      wineSamples = window.wineSamples || [];
    }

    // DOM —ç–ª–µ–º–µ–Ω—Ç—ã
    const logoutBtn = document.getElementById("logoutBtn");
    const addSampleBtn = document.getElementById("addSampleBtn");
    const modal = document.getElementById("addSampleModal");
    const closeModalBtn = document.querySelector(".close");
    const addSampleForm = document.getElementById("addSampleForm");

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—ã—Ö–æ–¥–∞
    logoutBtn.addEventListener("click", () => {
      if (confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –≤—ã–π—Ç–∏?")) {
        localStorage.removeItem('isAdminLoggedIn');
        window.location.href = 'index.html';
      }
    });

    // –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
    addSampleBtn.addEventListener("click", () => {
      modal.style.display = "flex";
    });

    // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
    closeModalBtn.addEventListener("click", () => {
      modal.style.display = "none";
    });

    // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
    window.addEventListener("click", (e) => {
      if (e.target === modal) {
        modal.style.display = "none";
      }
    });

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
    addSampleForm.addEventListener("submit", (e) => {
      e.preventDefault();
      addNewSample();
    });

    // –§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ –æ–±—Ä–∞–∑—Ü–∞
    function addNewSample() {
      const form = document.getElementById("addSampleForm");
      const newSample = {
        id: Math.max(...wineSamples.map(s => s.id), 0) + 1, // –ù–∞—Ö–æ–¥–∏–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π ID –∏ —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º –Ω–∞ 1
        name: form.name.value.trim(),
        sort: form.sort.value.trim(),
        harvestYear: parseInt(form.harvestYear.value),
        color: form.color.value.trim(),
        category: form.category.value.trim(),
        zone: form.zone.value.trim(),
        region: form.region.value.trim(),
        terroir: form.terroir.value.trim() || "–ù–µ —É–∫–∞–∑–∞–Ω",
        producer: form.producer.value.trim() || "–ù–µ —É–∫–∞–∑–∞–Ω",
        winery: form.winery.value.trim() || "–ù–µ —É–∫–∞–∑–∞–Ω",
        ethanol: form.ethanol.value ? parseFloat(form.ethanol.value) : 0,
        sugar: form.sugar.value ? parseFloat(form.sugar.value) : 0,
        acidity: form.acidity.value ? parseFloat(form.acidity.value) : 0,
        reducedExtract: form.reducedExtract.value ? parseFloat(form.reducedExtract.value) : 0,
        sulfurDioxide: form.sulfurDioxide.value ? parseFloat(form.sulfurDioxide.value) : 0,
        volatileAcids: form.volatileAcids.value ? parseFloat(form.volatileAcids.value) : 0,
        organicAcids: form.organicAcids.value ? parseFloat(form.organicAcids.value) : 0,
        phenolicCompounds: form.phenolicCompounds.value ? parseFloat(form.phenolicCompounds.value) : 0,
        metalCations: form.metalCations.value ? parseFloat(form.metalCations.value) : 0,
        inorganicAnions: form.inorganicAnions.value ? parseFloat(form.inorganicAnions.value) : 0,
        ph: form.ph.value ? parseFloat(form.ph.value) : 0,
        bufferCapacity: form.bufferCapacity.value ? parseFloat(form.bufferCapacity.value) : 0,
        electricConductivity: form.electricConductivity.value ? parseFloat(form.electricConductivity.value) : 0,
      };

      // –í–∞–ª–∏–¥–∞—Ü–∏—è
      if (
        !newSample.name ||
        !newSample.sort ||
        !newSample.harvestYear ||
        !newSample.color ||
        !newSample.category ||
        !newSample.zone ||
        !newSample.region
      ) {
        alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è");
        return;
      }

      wineSamples.push(newSample);
      
      // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ localStorage
      localStorage.setItem('wineSamples', JSON.stringify(wineSamples));

      // –°–±—Ä–æ—Å —Ñ–æ—Ä–º—ã
      form.reset();
      modal.style.display = "none";

      alert("–ù–æ–≤—ã–π –æ–±—Ä–∞–∑–µ—Ü —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω!");
      
      // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
      updateStats();
    }

    // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
    function updateStats() {
      document.getElementById("totalSamples").textContent = wineSamples.length;
      
      const whiteWines = wineSamples.filter(sample => sample.color === '–±–µ–ª–æ–µ').length;
      document.getElementById("whiteWines").textContent = whiteWines;
      
      const redWines = wineSamples.filter(sample => sample.color === '–∫—Ä–∞—Å–Ω–æ–µ').length;
      document.getElementById("redWines").textContent = redWines;
      
      const regions = [...new Set(wineSamples.map(sample => sample.region))];
      document.getElementById("regionsCount").textContent = regions.length;
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    document.addEventListener("DOMContentLoaded", updateStats);
  </script>
</body>
</html>